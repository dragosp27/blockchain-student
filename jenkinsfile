pipeline {
    agent {
        docker {
            image 'dragospetre2707/blockchain-laboratory:0.1'
        }
    }

    stages {
        stage('Observers') {
            steps {
                echo 'Observers'
            }
        }

        stage('Wallet') {
            steps {
                echo 'Wallet'
            }
        }

        stage('First Transaction') {
            steps {
                echo 'First Transaction'
            }
        }

        stage('Create ESDT Token') {
            steps {
                echo 'Create ESDT Token'
            }
        }

        stage('Send Tokens') {
            steps {
                echo 'Send Tokens'
            }
        }

        stage('Swap Tokens') {
            steps {
                echo 'Swap Tokens'
            }
        }

        stage('Peer-to-Peer') {
            steps {
                echo 'Peer-to-Peer'
            }
        }

        stage('Deploy Smart Contract') {
            steps {
                echo 'Deploy Smart Contract'
            }
        }

        stage('Call Smart Contract') {
            steps {
                script {
                    def SC_ADDRESS_FULL = sh(returnStdout: true, script: 'cat variables | grep SC_ADDRESS | cut -d "=" -f2')
                    def PROXY = sh(returnStdout:true, script: 'cat variables | grep PROXY | cut -d "=" -f2')
                    sh '''
                        mxpy --verbose contract query ${SC_ADDRESS_FULL} --function="getSum" --proxy=${PROXY}
                    '''
                }
            }
        }

        stage('Create Fungible Token') {
            steps {
                echo 'Create Fungible Token'
            }
        }

        stage('Create NFT') {
            steps {
                echo 'Create NFT'
            }
        }
    }
}